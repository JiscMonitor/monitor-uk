<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>service.forms.account API documentation</title>
    <meta name="description" content="Forms used to provide the user account UI" />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKActivateForm">MonitorUKActivateForm</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateForm.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateForm.populate_obj">populate_obj</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateForm.process">process</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateForm.validate">validate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKActivateFormContext">MonitorUKActivateFormContext</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.add_alert">add_alert</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.blank_form">blank_form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.data2form">data2form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.finalise">finalise</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.form2target">form2target</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.make_renderer">make_renderer</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.patch_target">patch_target</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.pre_validate">pre_validate</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.render_field_group">render_field_group</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.render_template">render_template</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.set_template">set_template</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.source2form">source2form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormContext.validate">validate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKActivateFormRenderer">MonitorUKActivateFormRenderer</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormRenderer.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormRenderer.find_field">find_field</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormRenderer.insert_field_after">insert_field_after</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormRenderer.render_field_group">render_field_group</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormRenderer.set_disabled_fields">set_disabled_fields</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKActivateFormRenderer.set_error_fields">set_error_fields</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserAdminForm">MonitorUKUserAdminForm</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminForm.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminForm.populate_obj">populate_obj</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminForm.process">process</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminForm.validate">validate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserAdminFormContext">MonitorUKUserAdminFormContext</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.add_alert">add_alert</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.blank_form">blank_form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.data2form">data2form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.finalise">finalise</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.form2target">form2target</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.legal">legal</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.make_renderer">make_renderer</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.patch_target">patch_target</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.pre_validate">pre_validate</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.render_field_group">render_field_group</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.render_template">render_template</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.set_template">set_template</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.source2form">source2form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormContext.validate">validate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer">MonitorUKUserAdminFormRenderer</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer.find_field">find_field</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer.insert_field_after">insert_field_after</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer.render_field_group">render_field_group</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer.set_disabled_fields">set_disabled_fields</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormRenderer.set_error_fields">set_error_fields</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserAdminFormXwalk">MonitorUKUserAdminFormXwalk</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormXwalk.form2obj">form2obj</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserAdminFormXwalk.obj2form">obj2form</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserForm.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserForm.populate_obj">populate_obj</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserForm.process">process</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserForm.validate">validate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserFormContext">MonitorUKUserFormContext</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.add_alert">add_alert</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.blank_form">blank_form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.data2form">data2form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.finalise">finalise</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.form2target">form2target</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.legal">legal</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.make_renderer">make_renderer</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.patch_target">patch_target</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.pre_validate">pre_validate</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.render_field_group">render_field_group</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.render_template">render_template</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.set_template">set_template</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.source2form">source2form</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormContext.validate">validate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserFormRenderer">MonitorUKUserFormRenderer</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormRenderer.__init__">__init__</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormRenderer.find_field">find_field</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormRenderer.insert_field_after">insert_field_after</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormRenderer.render_field_group">render_field_group</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormRenderer.set_disabled_fields">set_disabled_fields</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormRenderer.set_error_fields">set_error_fields</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#service.forms.account.MonitorUKUserFormXwalk">MonitorUKUserFormXwalk</a></span>
        
          
  <ul>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormXwalk.form2obj">form2obj</a></li>
    <li class="mono"><a href="#service.forms.account.MonitorUKUserFormXwalk.obj2form">obj2form</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">service.forms.account</span> module</h1>
  <p>Forms used to provide the user account UI</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account" class="source">
    <pre><code>"""
Forms used to provide the user account UI
"""

from octopus.modules.account.forms import BasicUserForm, BasicUserFormXwalk, BasicUserFormContext
from octopus.modules.form.context import FormContext, Renderer
from wtforms.fields import StringField, HiddenField, PasswordField
from wtforms import Form, validators

###########################################################

class MonitorUKUserForm(BasicUserForm):
    """
    Defines the central user form for all users to complete
    """
    name = StringField("Name", [validators.DataRequired()])

    organisation = StringField("Organisation", [validators.DataRequired()])

    org_role = StringField("Role at Organisation", [validators.DataRequired()])

    lantern_email = StringField("Lantern Email Address", [validators.Optional()], description="If you are using <a href='https://lantern.cottagelabs.com'>Lantern</a> for enhancing your records, enter the email you use to log in to Lantern here.")

    lantern_api_key = StringField("Lantern API Key", [validators.Optional()], description="If you are using <a href='https://lantern.cottagelabs.com'>Lantern</a> for enhancing your records, enter your Lantern API key here.")

    request_api_key = HiddenField("request_api_key", default="true")

class MonitorUKUserAdminForm(MonitorUKUserForm):
    """
    Defines an extension to the central user form to add fields also editable by administrators
    """
    user_roles = StringField("System Roles", [validators.Optional()])

    password = PasswordField("Your Admin Password", [validators.DataRequired()])

###########################################################

class MonitorUKUserFormXwalk(BasicUserFormXwalk):
    """
    Crosswalk for converting between the user form and the user account objects (in both directions)
    """

    @classmethod
    def obj2form(cls, acc):
        """
        Convert a user account object to a dictionary suitable for use with the form

        :param acc: user Account object
        :return: dictionary of form data
        """
        data = BasicUserFormXwalk.obj2form(acc)

        data["name"] = acc.name
        data["organisation"] = acc.organisation
        data["org_role"] = acc.org_role
        data["lantern_email"] = acc.lantern_email
        data["lantern_api_key"] = acc.lantern_api_key

        return data

    @classmethod
    def form2obj(cls, form, acc=None):
        """
        Convert a form object to a user account object.  If a user account object is already supplied,
        enhance that object

        :param form:
        :param acc:
        :return:
        """
        acc = BasicUserFormXwalk.form2obj(form, acc)

        if getattr(form, "name", None):
            acc.name = form.name.data
        if getattr(form, "organisation", None):
            acc.organisation = form.organisation.data
        if getattr(form, "org_role", None):
            acc.org_role = form.org_role.data
        if getattr(form, "lantern_email", None):
            acc.lantern_email = form.lantern_email.data
        if getattr(form, "lantern_api_key", None):
            acc.lantern_api_key = form.lantern_api_key.data

        # if a new API key has been requested, set it
        if form.request_api_key.data == "true":
            acc.generate_api_key()

        return acc

class MonitorUKUserFormContext(BasicUserFormContext):
    """
    Form context definition for the main user form

    This defines the behaviours of the user account form from initial seeding from the account object, through
    to rendering, and reading the data back to the updated account object.
    """
    def set_template(self):
        self.template = "account/user.html"

    def make_renderer(self):
        self.renderer = MonitorUKUserFormRenderer()

    def blank_form(self):
        self.form = MonitorUKUserForm()

    def data2form(self):
        self.form = MonitorUKUserForm(formdata=self.form_data)

    def source2form(self):
        data = MonitorUKUserFormXwalk.obj2form(self.source)
        self.form = MonitorUKUserForm(data=data)

    def form2target(self):
        self.target = MonitorUKUserFormXwalk.form2obj(self.form, self.source)

    def finalise(self):
        super(MonitorUKUserFormContext, self).finalise()
        self.target.save(blocking=True)

    def render_template(self, template=None, **kwargs):
        return super(MonitorUKUserFormContext, self).render_template(template=template, account=self.source, **kwargs)

    def pre_validate(self):
        # if this is a request to renew the API key, we don't do anything else with the form data
        if self.form.request_api_key.data == "true":
            password = self.form.password.data
            self.source2form()
            self.form.password.data = password

class MonitorUKUserFormRenderer(Renderer):
    """
    Renderer definition for the user form.

    Specifies the fields, the orders of those fields, and any additional rendering-related settings
    """
    def __init__(self):
        super(MonitorUKUserFormRenderer, self).__init__()

        self.FIELD_GROUPS = {
            "details" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "email" : {
                            "attributes" : {"placeholder" : "Your email address"}
                        }
                    },
                    {
                        "name" : {
                            "attributes" : {"placeholder" : "Your name"}
                        }
                    },
                    {
                        "organisation" : {
                            "attributes" : {"placeholder" : "The organisation you work for"}
                        }
                    },
                    {
                        "org_role" : {
                            "attributes" : {"placeholder" : "Your role at your organisation"}
                        }
                    },
                    {
                        "lantern_email" : {
                            "attributes" : {"placeholder" : "Your user account email for Lantern"}
                        }
                    },
                    {
                        "lantern_api_key" : {
                            "attributes" : {"placeholder" : "Your account API key for Lantern"}
                        }
                    },
                    {
                        "new_password" : {
                            "attributes" : {"placeholder" : "Leave blank if not changing password"}
                        }
                    },
                    {
                        "confirm_new_password" : {
                            "attributes" : {"placeholder" : "Leave blank if not changing password"}
                        }
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Enter password to make changes"}
                        }
                    }
                ]
            },
            "api_key" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "request_api_key" : {
                            "attributes" : {}
                        },
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Enter your password to make changes"}
                        }
                    }
                ]
            }
        }

##################################################

class MonitorUKUserAdminFormXwalk(MonitorUKUserFormXwalk):
    """
    Crosswalk for converting between the user form and the user account objects (in both directions)
    within the context of an administrator interaction
    """

    @classmethod
    def obj2form(cls, acc):
        """
        Convert a user account object to a dictionary suitable for use with the admin form

        :param acc: user Account object
        :return: dictionary of form data
        """
        data = MonitorUKUserFormXwalk.obj2form(acc)
        data["user_roles"] = ", ".join(acc.role)
        return data

    @classmethod
    def form2obj(cls, form, acc=None):
        """
        Convert an admin form object to a user account object.  If a user account object is already supplied,
        enhance that object

        :param form:
        :param acc:
        :return:
        """
        acc = MonitorUKUserFormXwalk.form2obj(form, acc)

        if getattr(form, "user_roles", None):
            acc.role = [r.strip() for r in form.user_roles.data.split(",")]

        return acc

class MonitorUKUserAdminFormContext(BasicUserFormContext):
    """
    Form context definition for the admin user form

    This defines the behaviours of the admin account form from initial seeding from the account object, through
    to rendering, and reading the data back to the updated account object.
    """

    def set_template(self):
        self.template = "account/user.html"

    def make_renderer(self):
        self.renderer = MonitorUKUserAdminFormRenderer()

    def blank_form(self):
        self.form = MonitorUKUserAdminForm()

    def data2form(self):
        self.form = MonitorUKUserAdminForm(formdata=self.form_data)

    def source2form(self):
        data = MonitorUKUserAdminFormXwalk.obj2form(self.source)
        self.form = MonitorUKUserAdminForm(data=data)

    def form2target(self):
        self.target = MonitorUKUserAdminFormXwalk.form2obj(self.form, self.source)

    def finalise(self):
        super(MonitorUKUserAdminFormContext, self).finalise()
        self.target.save(blocking=True)

    def render_template(self, template=None, **kwargs):
        return super(MonitorUKUserAdminFormContext, self).render_template(template=template, account=self.source, **kwargs)

    def pre_validate(self):
        # if this is a request to renew the API key, we don't do anything else with the form data
        if self.form.request_api_key.data == "true":
            password = self.form.password.data
            self.source2form()
            self.form.password.data = password


class MonitorUKUserAdminFormRenderer(Renderer):
    """
    Renderer definition for the user admin form.

    Specifies the fields, the orders of those fields, and any additional rendering-related settings
    """
    def __init__(self):
        super(MonitorUKUserAdminFormRenderer, self).__init__()

        self.FIELD_GROUPS = {
            "details" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "email" : {
                            "attributes" : {"placeholder" : "User's email address"}
                        }
                    },
                    {
                        "name" : {
                            "attributes" : {"placeholder" : "User's name"}
                        }
                    },
                    {
                        "organisation" : {
                            "attributes" : {"placeholder" : "The organisation the user works for"}
                        }
                    },
                    {
                        "org_role" : {
                            "attributes" : {"placeholder" : "User's role at their organisation"}
                        }
                    },
                    {
                        "lantern_email" : {
                            "attributes" : {"placeholder" : "Your user account email for Lantern"}
                        }
                    },
                    {
                        "lantern_api_key" : {
                            "attributes" : {"placeholder" : "Your account API key for Lantern"}
                        }
                    },
                    {
                        "user_roles" : {
                            "attributes" : {"placeholder" : "User's system roles (comma separated)"}
                        }
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Your admin password"}
                        }
                    }
                ]
            },
            "api_key" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "request_api_key" : {
                            "attributes" : {}
                        },
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Enter your password to make changes"}
                        }
                    }
                ]
            }
        }

###################################################


class MonitorUKActivateForm(Form):
    """
    Defines the user activation form, with minimal information on it
    """
    name = StringField("Name", [validators.DataRequired()])

    organisation = StringField("Organisation", [validators.DataRequired()])

    org_role = StringField("Role at Organisation", [validators.DataRequired()])

    new_password = PasswordField('New Password', [
        validators.DataRequired(),
        validators.EqualTo('confirm_new_password', message='Passwords must match')
    ])

    confirm_new_password = PasswordField('Repeat Password', [validators.DataRequired()])

class MonitorUKActivateFormContext(FormContext):
    """
    Form context definition for the activation form

    This defines the behaviours of the activation form
    """
    def set_template(self):
        self.template = "account/activate.html"

    def make_renderer(self):
        self.renderer = MonitorUKActivateFormRenderer()

    def blank_form(self):
        self.form = MonitorUKActivateForm()

    def data2form(self):
        self.form = MonitorUKActivateForm(formdata=self.form_data)

    def source2form(self):
        self.form = MonitorUKActivateForm()

    def finalise(self):
        super(MonitorUKActivateFormContext, self).finalise()

        password = self.form.new_password.data
        self.source.set_password(password)
        self.source.name = self.form.name.data
        self.source.organisation = self.form.organisation.data
        self.source.org_role = self.form.org_role.data
        self.source.remove_activation_token()
        self.source.save(blocking=True)

    def render_template(self, template=None, **kwargs):
        return super(MonitorUKActivateFormContext, self).render_template(template=template, account=self.source, **kwargs)

class MonitorUKActivateFormRenderer(Renderer):
    """
    Renderer definition for the account activation form

    Specifies the fields, the orders of those fields, and any additional rendering-related settings
    """
    def __init__(self):
        super(MonitorUKActivateFormRenderer, self).__init__()

        self.FIELD_GROUPS = {
            "activate" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "name" : {
                            "attributes" : {"placeholder" : "Your name"}
                        }
                    },
                    {
                        "organisation" : {
                            "attributes" : {"placeholder" : "The organisation you work for"}
                        }
                    },
                    {
                        "org_role" : {
                            "attributes" : {"placeholder" : "Your role at your organisation"}
                        }
                    },
                    {
                        "new_password" : {
                            "attributes" : {"placeholder" : "Your desired password"}
                        }
                    },
                    {
                        "confirm_new_password" : {
                            "attributes" : {"placeholder" : "Repeat your desired password"}
                        }
                    }
                ]
            }
        }
</code></pre>
  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKActivateForm" class="name">class <span class="ident">MonitorUKActivateForm</span></p>
      
  
    <div class="desc"><p>Defines the user activation form, with minimal information on it</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateForm', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateForm" class="source">
    <pre><code>class MonitorUKActivateForm(Form):
    """
    Defines the user activation form, with minimal information on it
    """
    name = StringField("Name", [validators.DataRequired()])

    organisation = StringField("Organisation", [validators.DataRequired()])

    org_role = StringField("Role at Organisation", [validators.DataRequired()])

    new_password = PasswordField('New Password', [
        validators.DataRequired(),
        validators.EqualTo('confirm_new_password', message='Passwords must match')
    ])

    confirm_new_password = PasswordField('Repeat Password', [validators.DataRequired()])
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKActivateForm">MonitorUKActivateForm</a></li>
          <li>wtforms.form.Form</li>
          <li>wtforms.compat.NewBase</li>
          <li>wtforms.form.BaseForm</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.confirm_new_password" class="name">var <span class="ident">confirm_new_password</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.new_password" class="name">var <span class="ident">new_password</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.org_role" class="name">var <span class="ident">org_role</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.organisation" class="name">var <span class="ident">organisation</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.data" class="name">var <span class="ident">data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateForm.errors" class="name">var <span class="ident">errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateForm.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, formdata=None, obj=None, prefix=&#39;&#39;, data=None, meta=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>:param formdata:
    Used to pass data coming from the enduser, usually <code>request.POST</code> or
    equivalent. formdata should be some sort of request-data wrapper which
    can get multiple parameters from the form input, and values are unicode
    strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
    If <code>formdata</code> is empty or not provided, this object is checked for
    attributes matching form field names, which will be used for field
    values.
:param prefix:
    If provided, all fields will have their name prefixed with the
    value.
:param data:
    Accept a dictionary of data. This is only used if <code>formdata</code> and
    <code>obj</code> are not present.
:param meta:
    If provided, this is a dictionary of values to override attributes
    on this form's meta instance.
:param <code>**kwargs</code>:
    If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as a field, form will assign the value
    of a matching keyword argument to the field, if one exists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateForm.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateForm.__init__" class="source">
    <pre><code>def __init__(self, formdata=None, obj=None, prefix='', data=None, meta=None, **kwargs):
    """
    :param formdata:
        Used to pass data coming from the enduser, usually `request.POST` or
        equivalent. formdata should be some sort of request-data wrapper which
        can get multiple parameters from the form input, and values are unicode
        strings, e.g. a Werkzeug/Django/WebOb MultiDict
    :param obj:
        If `formdata` is empty or not provided, this object is checked for
        attributes matching form field names, which will be used for field
        values.
    :param prefix:
        If provided, all fields will have their name prefixed with the
        value.
    :param data:
        Accept a dictionary of data. This is only used if `formdata` and
        `obj` are not present.
    :param meta:
        If provided, this is a dictionary of values to override attributes
        on this form's meta instance.
    :param `**kwargs`:
        If `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as a field, form will assign the value
        of a matching keyword argument to the field, if one exists.
    """
    meta_obj = self._wtforms_meta()
    if meta is not None and isinstance(meta, dict):
        meta_obj.update_values(meta)
    super(Form, self).__init__(self._unbound_fields, meta=meta_obj, prefix=prefix)
    for name, field in iteritems(self._fields):
        # Set all the fields to attributes so that they obscure the class
        # attributes with the same names.
        setattr(self, name, field)
    self.process(formdata, obj, data=data, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateForm.populate_obj">
    <p>def <span class="ident">populate_obj</span>(</p><p>self, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Populates the attributes of the passed <code>obj</code> with data from the form's
fields.</p>
<p>:note: This is a destructive operation; Any attribute with the same name
       as a field will be overridden. Use with caution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateForm.populate_obj', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateForm.populate_obj" class="source">
    <pre><code>def populate_obj(self, obj):
    """
    Populates the attributes of the passed `obj` with data from the form's
    fields.
    :note: This is a destructive operation; Any attribute with the same name
           as a field will be overridden. Use with caution.
    """
    for name, field in iteritems(self._fields):
        field.populate_obj(obj, name)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateForm.process">
    <p>def <span class="ident">process</span>(</p><p>self, formdata=None, obj=None, data=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Take form, object data, and keyword arg input and have the fields
process them.</p>
<p>:param formdata:
    Used to pass data coming from the enduser, usually <code>request.POST</code> or
    equivalent.
:param obj:
    If <code>formdata</code> is empty or not provided, this object is checked for
    attributes matching form field names, which will be used for field
    values.
:param data:
    If provided, must be a dictionary of data. This is only used if
    <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as the field.
:param <code>**kwargs</code>:
    If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as a field, form will assign the value
    of a matching keyword argument to the field, if one exists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateForm.process', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateForm.process" class="source">
    <pre><code>def process(self, formdata=None, obj=None, data=None, **kwargs):
    """
    Take form, object data, and keyword arg input and have the fields
    process them.
    :param formdata:
        Used to pass data coming from the enduser, usually `request.POST` or
        equivalent.
    :param obj:
        If `formdata` is empty or not provided, this object is checked for
        attributes matching form field names, which will be used for field
        values.
    :param data:
        If provided, must be a dictionary of data. This is only used if
        `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as the field.
    :param `**kwargs`:
        If `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as a field, form will assign the value
        of a matching keyword argument to the field, if one exists.
    """
    formdata = self.meta.wrap_formdata(self, formdata)
    if data is not None:
        # XXX we want to eventually process 'data' as a new entity.
        #     Temporarily, this can simply be merged with kwargs.
        kwargs = dict(data, **kwargs)
    for name, field, in iteritems(self._fields):
        if obj is not None and hasattr(obj, name):
            field.process(formdata, getattr(obj, name))
        elif name in kwargs:
            field.process(formdata, kwargs[name])
        else:
            field.process(formdata)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateForm.validate">
    <p>def <span class="ident">validate</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Validates the form by calling <code>validate</code> on each field, passing any
extra <code>Form.validate_&lt;fieldname&gt;</code> validators to the field validator.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateForm.validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateForm.validate" class="source">
    <pre><code>def validate(self):
    """
    Validates the form by calling `validate` on each field, passing any
    extra `Form.validate_<fieldname>` validators to the field validator.
    """
    extra = {}
    for name in self._fields:
        inline = getattr(self.__class__, 'validate_%s' % name, None)
        if inline is not None:
            extra[name] = [inline]
    return super(Form, self).validate(extra)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKActivateFormContext" class="name">class <span class="ident">MonitorUKActivateFormContext</span></p>
      
  
    <div class="desc"><p>Form context definition for the activation form</p>
<p>This defines the behaviours of the activation form</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext" class="source">
    <pre><code>class MonitorUKActivateFormContext(FormContext):
    """
    Form context definition for the activation form

    This defines the behaviours of the activation form
    """
    def set_template(self):
        self.template = "account/activate.html"

    def make_renderer(self):
        self.renderer = MonitorUKActivateFormRenderer()

    def blank_form(self):
        self.form = MonitorUKActivateForm()

    def data2form(self):
        self.form = MonitorUKActivateForm(formdata=self.form_data)

    def source2form(self):
        self.form = MonitorUKActivateForm()

    def finalise(self):
        super(MonitorUKActivateFormContext, self).finalise()

        password = self.form.new_password.data
        self.source.set_password(password)
        self.source.name = self.form.name.data
        self.source.organisation = self.form.organisation.data
        self.source.org_role = self.form.org_role.data
        self.source.remove_activation_token()
        self.source.save(blocking=True)

    def render_template(self, template=None, **kwargs):
        return super(MonitorUKActivateFormContext, self).render_template(template=template, account=self.source, **kwargs)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKActivateFormContext">MonitorUKActivateFormContext</a></li>
          <li>octopus.modules.form.context.FormContext</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.alert" class="name">var <span class="ident">alert</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.errors" class="name">var <span class="ident">errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.form" class="name">var <span class="ident">form</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.form_data" class="name">var <span class="ident">form_data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.renderer" class="name">var <span class="ident">renderer</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.source" class="name">var <span class="ident">source</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.target" class="name">var <span class="ident">target</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormContext.template" class="name">var <span class="ident">template</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, form_data=None, source=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.__init__" class="source">
    <pre><code>def __init__(self, form_data=None, source=None):
    # initialise our core properties
    self._source = source
    self._target = None
    self._form_data = form_data
    self._form = None
    self._renderer = None
    self._template = None
    self._alert = []
    # initialise the renderer (falling back to a default if necessary)
    self.make_renderer()
    if self.renderer is None:
        self.renderer = Renderer()
    # specify the jinja template that will wrap the renderer
    self.set_template()
    # now create our form instance, with the form_data (if there is any)
    if form_data is not None:
        self.data2form()
    # if there isn't any form data, then we should create the form properties from source instead
    elif source is not None:
        self.source2form()
    # if there is no source, then a blank form object
    else:
        self.blank_form()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.add_alert">
    <p>def <span class="ident">add_alert</span>(</p><p>self, val)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.add_alert', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.add_alert" class="source">
    <pre><code>def add_alert(self, val):
    self._alert.append(val)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.blank_form">
    <p>def <span class="ident">blank_form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.blank_form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.blank_form" class="source">
    <pre><code>def blank_form(self):
    self.form = MonitorUKActivateForm()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.data2form">
    <p>def <span class="ident">data2form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.data2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.data2form" class="source">
    <pre><code>def data2form(self):
    self.form = MonitorUKActivateForm(formdata=self.form_data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.finalise">
    <p>def <span class="ident">finalise</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.finalise', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.finalise" class="source">
    <pre><code>def finalise(self):
    super(MonitorUKActivateFormContext, self).finalise()
    password = self.form.new_password.data
    self.source.set_password(password)
    self.source.name = self.form.name.data
    self.source.organisation = self.form.organisation.data
    self.source.org_role = self.form.org_role.data
    self.source.remove_activation_token()
    self.source.save(blocking=True)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.form2target">
    <p>def <span class="ident">form2target</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Convert the form object into a the target system object, and write to self.target</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.form2target', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.form2target" class="source">
    <pre><code>def form2target(self):
    """
    Convert the form object into a the target system object, and write to self.target
    """
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.make_renderer">
    <p>def <span class="ident">make_renderer</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.make_renderer', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.make_renderer" class="source">
    <pre><code>def make_renderer(self):
    self.renderer = MonitorUKActivateFormRenderer()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.patch_target">
    <p>def <span class="ident">patch_target</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Patch the target with data from the source.  This will be run by the finalise method (unless you override it)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.patch_target', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.patch_target" class="source">
    <pre><code>def patch_target(self):
    """
    Patch the target with data from the source.  This will be run by the finalise method (unless you override it)
    """
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.pre_validate">
    <p>def <span class="ident">pre_validate</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>This will be run before validation against the form is run.
Use it to patch the form with any relevant data, such as fields which were disabled</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.pre_validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.pre_validate" class="source">
    <pre><code>def pre_validate(self):
    """
    This will be run before validation against the form is run.
    Use it to patch the form with any relevant data, such as fields which were disabled
    """
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.render_field_group">
    <p>def <span class="ident">render_field_group</span>(</p><p>self, field_group_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.render_field_group', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.render_field_group" class="source">
    <pre><code>def render_field_group(self, field_group_name=None):
    return self.renderer.render_field_group(self, field_group_name)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.render_template">
    <p>def <span class="ident">render_template</span>(</p><p>self, template=None, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.render_template', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.render_template" class="source">
    <pre><code>def render_template(self, template=None, **kwargs):
    return super(MonitorUKActivateFormContext, self).render_template(template=template, account=self.source, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.set_template">
    <p>def <span class="ident">set_template</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.set_template', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.set_template" class="source">
    <pre><code>def set_template(self):
    self.template = "account/activate.html"
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.source2form">
    <p>def <span class="ident">source2form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.source2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.source2form" class="source">
    <pre><code>def source2form(self):
    self.form = MonitorUKActivateForm()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormContext.validate">
    <p>def <span class="ident">validate</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormContext.validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormContext.validate" class="source">
    <pre><code>def validate(self):
    self.pre_validate()
    f = self.form
    valid = False
    if f is not None:
        valid = f.validate()
    # if this isn't a valid form, record the fields that have errors
    # with the renderer for use later
    if not valid:
        error_fields = []
        for field in self.form:
            if field.errors:
                error_fields.append(field.short_name)
        if self.renderer is not None:
            self.renderer.set_error_fields(error_fields)
    return valid
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKActivateFormRenderer" class="name">class <span class="ident">MonitorUKActivateFormRenderer</span></p>
      
  
    <div class="desc"><p>Renderer definition for the account activation form</p>
<p>Specifies the fields, the orders of those fields, and any additional rendering-related settings</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer" class="source">
    <pre><code>class MonitorUKActivateFormRenderer(Renderer):
    """
    Renderer definition for the account activation form

    Specifies the fields, the orders of those fields, and any additional rendering-related settings
    """
    def __init__(self):
        super(MonitorUKActivateFormRenderer, self).__init__()

        self.FIELD_GROUPS = {
            "activate" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "name" : {
                            "attributes" : {"placeholder" : "Your name"}
                        }
                    },
                    {
                        "organisation" : {
                            "attributes" : {"placeholder" : "The organisation you work for"}
                        }
                    },
                    {
                        "org_role" : {
                            "attributes" : {"placeholder" : "Your role at your organisation"}
                        }
                    },
                    {
                        "new_password" : {
                            "attributes" : {"placeholder" : "Your desired password"}
                        }
                    },
                    {
                        "confirm_new_password" : {
                            "attributes" : {"placeholder" : "Repeat your desired password"}
                        }
                    }
                ]
            }
        }
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKActivateFormRenderer">MonitorUKActivateFormRenderer</a></li>
          <li>octopus.modules.form.context.Renderer</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormRenderer.FIELD_GROUPS" class="name">var <span class="ident">FIELD_GROUPS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormRenderer.disabled_fields" class="name">var <span class="ident">disabled_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKActivateFormRenderer.error_fields" class="name">var <span class="ident">error_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormRenderer.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer.__init__" class="source">
    <pre><code>def __init__(self):
    super(MonitorUKActivateFormRenderer, self).__init__()
    self.FIELD_GROUPS = {
        "activate" : {
            "helper" : "bs3_horizontal",
            "wrappers" : ["first_error", "container"],
            "label_width" : 4,
            "control_width" : 8,
            "fields" : [
                {
                    "name" : {
                        "attributes" : {"placeholder" : "Your name"}
                    }
                },
                {
                    "organisation" : {
                        "attributes" : {"placeholder" : "The organisation you work for"}
                    }
                },
                {
                    "org_role" : {
                        "attributes" : {"placeholder" : "Your role at your organisation"}
                    }
                },
                {
                    "new_password" : {
                        "attributes" : {"placeholder" : "Your desired password"}
                    }
                },
                {
                    "confirm_new_password" : {
                        "attributes" : {"placeholder" : "Repeat your desired password"}
                    }
                }
            ]
        }
    }
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormRenderer.find_field">
    <p>def <span class="ident">find_field</span>(</p><p>self, field, field_group)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer.find_field', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer.find_field" class="source">
    <pre><code>def find_field(self, field, field_group):
    for index, item in enumerate(self.FIELD_GROUPS[field_group]):
        if field in item:
            return index
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormRenderer.insert_field_after">
    <p>def <span class="ident">insert_field_after</span>(</p><p>self, field_to_insert, after_this_field, field_group)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer.insert_field_after', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer.insert_field_after" class="source">
    <pre><code>def insert_field_after(self, field_to_insert, after_this_field, field_group):
    self.FIELD_GROUPS[field_group].insert(
        self.find_field(after_this_field, field_group) + 1,
        field_to_insert
    )
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormRenderer.render_field_group">
    <p>def <span class="ident">render_field_group</span>(</p><p>self, form_context, field_group_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer.render_field_group', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer.render_field_group" class="source">
    <pre><code>def render_field_group(self, form_context, field_group_name=None):
    if field_group_name is None:
        return self._render_all(form_context)
    # get the group definition
    group_def = self.FIELD_GROUPS.get(field_group_name)
    if group_def is None:
        return ""
    # get the form helper
    fh = helper.FormHelperFactory.get(group_def.get("helper"), group_def.get("wrappers"))
    label_width = group_def.get("label_width")
    control_width = group_def.get("control_width")
    # build the frag
    frag = ""
    for entry in group_def.get("fields", []):
        field_name = entry.keys()[0]
        config = entry.get(field_name)
        if "label_width" not in config:
            config["label_width"] = label_width
        if "control_width" not in config:
            config["control_width"] = control_width
        # config = self._rewrite_extra_fields(form_context, config)
        field = form_context.form[field_name]
        if field_name in self.disabled_fields:
            config = deepcopy(config)
            if "attributes" not in config:
                config["attributes"] = {}
            config["attributes"]["disabled"] = "disabled"
        frag += fh.render_field(field, **config)
    return frag
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormRenderer.set_disabled_fields">
    <p>def <span class="ident">set_disabled_fields</span>(</p><p>self, fields)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer.set_disabled_fields', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer.set_disabled_fields" class="source">
    <pre><code>def set_disabled_fields(self, fields):
    self._disabled_fields = fields
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKActivateFormRenderer.set_error_fields">
    <p>def <span class="ident">set_error_fields</span>(</p><p>self, fields)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKActivateFormRenderer.set_error_fields', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKActivateFormRenderer.set_error_fields" class="source">
    <pre><code>def set_error_fields(self, fields):
    self._error_fields = fields
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserAdminForm" class="name">class <span class="ident">MonitorUKUserAdminForm</span></p>
      
  
    <div class="desc"><p>Defines an extension to the central user form to add fields also editable by administrators</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminForm', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminForm" class="source">
    <pre><code>class MonitorUKUserAdminForm(MonitorUKUserForm):
    """
    Defines an extension to the central user form to add fields also editable by administrators
    """
    user_roles = StringField("System Roles", [validators.Optional()])

    password = PasswordField("Your Admin Password", [validators.DataRequired()])
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserAdminForm">MonitorUKUserAdminForm</a></li>
          <li><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></li>
          <li>octopus.modules.account.forms.BasicUserForm</li>
          <li>wtforms.form.Form</li>
          <li>wtforms.compat.NewBase</li>
          <li>wtforms.form.BaseForm</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.Meta" class="name">var <span class="ident">Meta</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.Meta">Meta</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.confirm_new_password" class="name">var <span class="ident">confirm_new_password</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.confirm_new_password">confirm_new_password</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.email" class="name">var <span class="ident">email</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.email">email</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.lantern_api_key" class="name">var <span class="ident">lantern_api_key</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.lantern_api_key">lantern_api_key</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.lantern_email" class="name">var <span class="ident">lantern_email</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.lantern_email">lantern_email</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.name" class="name">var <span class="ident">name</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.name">name</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.new_password" class="name">var <span class="ident">new_password</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.new_password">new_password</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.org_role" class="name">var <span class="ident">org_role</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.org_role">org_role</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.organisation" class="name">var <span class="ident">organisation</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.organisation">organisation</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.password" class="name">var <span class="ident">password</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.password">password</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.request_api_key" class="name">var <span class="ident">request_api_key</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.request_api_key">request_api_key</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.user_roles" class="name">var <span class="ident">user_roles</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.data" class="name">var <span class="ident">data</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.data">data</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminForm.errors" class="name">var <span class="ident">errors</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.errors">errors</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminForm.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, formdata=None, obj=None, prefix=&#39;&#39;, data=None, meta=None, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc inherited"><p>:param formdata:
    Used to pass data coming from the enduser, usually <code>request.POST</code> or
    equivalent. formdata should be some sort of request-data wrapper which
    can get multiple parameters from the form input, and values are unicode
    strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
    If <code>formdata</code> is empty or not provided, this object is checked for
    attributes matching form field names, which will be used for field
    values.
:param prefix:
    If provided, all fields will have their name prefixed with the
    value.
:param data:
    Accept a dictionary of data. This is only used if <code>formdata</code> and
    <code>obj</code> are not present.
:param meta:
    If provided, this is a dictionary of values to override attributes
    on this form's meta instance.
:param <code>**kwargs</code>:
    If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as a field, form will assign the value
    of a matching keyword argument to the field, if one exists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminForm.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminForm.__init__" class="source">
    <pre><code>def __init__(self, formdata=None, obj=None, prefix='', data=None, meta=None, **kwargs):
    """
    :param formdata:
        Used to pass data coming from the enduser, usually `request.POST` or
        equivalent. formdata should be some sort of request-data wrapper which
        can get multiple parameters from the form input, and values are unicode
        strings, e.g. a Werkzeug/Django/WebOb MultiDict
    :param obj:
        If `formdata` is empty or not provided, this object is checked for
        attributes matching form field names, which will be used for field
        values.
    :param prefix:
        If provided, all fields will have their name prefixed with the
        value.
    :param data:
        Accept a dictionary of data. This is only used if `formdata` and
        `obj` are not present.
    :param meta:
        If provided, this is a dictionary of values to override attributes
        on this form's meta instance.
    :param `**kwargs`:
        If `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as a field, form will assign the value
        of a matching keyword argument to the field, if one exists.
    """
    meta_obj = self._wtforms_meta()
    if meta is not None and isinstance(meta, dict):
        meta_obj.update_values(meta)
    super(Form, self).__init__(self._unbound_fields, meta=meta_obj, prefix=prefix)
    for name, field in iteritems(self._fields):
        # Set all the fields to attributes so that they obscure the class
        # attributes with the same names.
        setattr(self, name, field)
    self.process(formdata, obj, data=data, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminForm.populate_obj">
    <p>def <span class="ident">populate_obj</span>(</p><p>self, obj)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.populate_obj">populate_obj</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Populates the attributes of the passed <code>obj</code> with data from the form's
fields.</p>
<p>:note: This is a destructive operation; Any attribute with the same name
       as a field will be overridden. Use with caution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminForm.populate_obj', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminForm.populate_obj" class="source">
    <pre><code>def populate_obj(self, obj):
    """
    Populates the attributes of the passed `obj` with data from the form's
    fields.
    :note: This is a destructive operation; Any attribute with the same name
           as a field will be overridden. Use with caution.
    """
    for name, field in iteritems(self._fields):
        field.populate_obj(obj, name)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminForm.process">
    <p>def <span class="ident">process</span>(</p><p>self, formdata=None, obj=None, data=None, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.process">process</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Take form, object data, and keyword arg input and have the fields
process them.</p>
<p>:param formdata:
    Used to pass data coming from the enduser, usually <code>request.POST</code> or
    equivalent.
:param obj:
    If <code>formdata</code> is empty or not provided, this object is checked for
    attributes matching form field names, which will be used for field
    values.
:param data:
    If provided, must be a dictionary of data. This is only used if
    <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as the field.
:param <code>**kwargs</code>:
    If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as a field, form will assign the value
    of a matching keyword argument to the field, if one exists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminForm.process', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminForm.process" class="source">
    <pre><code>def process(self, formdata=None, obj=None, data=None, **kwargs):
    """
    Take form, object data, and keyword arg input and have the fields
    process them.
    :param formdata:
        Used to pass data coming from the enduser, usually `request.POST` or
        equivalent.
    :param obj:
        If `formdata` is empty or not provided, this object is checked for
        attributes matching form field names, which will be used for field
        values.
    :param data:
        If provided, must be a dictionary of data. This is only used if
        `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as the field.
    :param `**kwargs`:
        If `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as a field, form will assign the value
        of a matching keyword argument to the field, if one exists.
    """
    formdata = self.meta.wrap_formdata(self, formdata)
    if data is not None:
        # XXX we want to eventually process 'data' as a new entity.
        #     Temporarily, this can simply be merged with kwargs.
        kwargs = dict(data, **kwargs)
    for name, field, in iteritems(self._fields):
        if obj is not None and hasattr(obj, name):
            field.process(formdata, getattr(obj, name))
        elif name in kwargs:
            field.process(formdata, kwargs[name])
        else:
            field.process(formdata)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminForm.validate">
    <p>def <span class="ident">validate</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></code>.<code><a href="#service.forms.account.MonitorUKUserForm.validate">validate</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Validates the form by calling <code>validate</code> on each field, passing any
extra <code>Form.validate_&lt;fieldname&gt;</code> validators to the field validator.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminForm.validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminForm.validate" class="source">
    <pre><code>def validate(self):
    """
    Validates the form by calling `validate` on each field, passing any
    extra `Form.validate_<fieldname>` validators to the field validator.
    """
    extra = {}
    for name in self._fields:
        inline = getattr(self.__class__, 'validate_%s' % name, None)
        if inline is not None:
            extra[name] = [inline]
    return super(Form, self).validate(extra)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserAdminFormContext" class="name">class <span class="ident">MonitorUKUserAdminFormContext</span></p>
      
  
    <div class="desc"><p>Form context definition for the admin user form</p>
<p>This defines the behaviours of the admin account form from initial seeding from the account object, through
to rendering, and reading the data back to the updated account object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext" class="source">
    <pre><code>class MonitorUKUserAdminFormContext(BasicUserFormContext):
    """
    Form context definition for the admin user form

    This defines the behaviours of the admin account form from initial seeding from the account object, through
    to rendering, and reading the data back to the updated account object.
    """

    def set_template(self):
        self.template = "account/user.html"

    def make_renderer(self):
        self.renderer = MonitorUKUserAdminFormRenderer()

    def blank_form(self):
        self.form = MonitorUKUserAdminForm()

    def data2form(self):
        self.form = MonitorUKUserAdminForm(formdata=self.form_data)

    def source2form(self):
        data = MonitorUKUserAdminFormXwalk.obj2form(self.source)
        self.form = MonitorUKUserAdminForm(data=data)

    def form2target(self):
        self.target = MonitorUKUserAdminFormXwalk.form2obj(self.form, self.source)

    def finalise(self):
        super(MonitorUKUserAdminFormContext, self).finalise()
        self.target.save(blocking=True)

    def render_template(self, template=None, **kwargs):
        return super(MonitorUKUserAdminFormContext, self).render_template(template=template, account=self.source, **kwargs)

    def pre_validate(self):
        # if this is a request to renew the API key, we don't do anything else with the form data
        if self.form.request_api_key.data == "true":
            password = self.form.password.data
            self.source2form()
            self.form.password.data = password
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserAdminFormContext">MonitorUKUserAdminFormContext</a></li>
          <li>octopus.modules.account.forms.BasicUserFormContext</li>
          <li>octopus.modules.form.context.FormContext</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.alert" class="name">var <span class="ident">alert</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.errors" class="name">var <span class="ident">errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.form" class="name">var <span class="ident">form</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.form_data" class="name">var <span class="ident">form_data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.renderer" class="name">var <span class="ident">renderer</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.source" class="name">var <span class="ident">source</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.target" class="name">var <span class="ident">target</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormContext.template" class="name">var <span class="ident">template</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, form_data=None, source=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.__init__" class="source">
    <pre><code>def __init__(self, form_data=None, source=None):
    # initialise our core properties
    self._source = source
    self._target = None
    self._form_data = form_data
    self._form = None
    self._renderer = None
    self._template = None
    self._alert = []
    # initialise the renderer (falling back to a default if necessary)
    self.make_renderer()
    if self.renderer is None:
        self.renderer = Renderer()
    # specify the jinja template that will wrap the renderer
    self.set_template()
    # now create our form instance, with the form_data (if there is any)
    if form_data is not None:
        self.data2form()
    # if there isn't any form data, then we should create the form properties from source instead
    elif source is not None:
        self.source2form()
    # if there is no source, then a blank form object
    else:
        self.blank_form()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.add_alert">
    <p>def <span class="ident">add_alert</span>(</p><p>self, val)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.add_alert', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.add_alert" class="source">
    <pre><code>def add_alert(self, val):
    self._alert.append(val)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.blank_form">
    <p>def <span class="ident">blank_form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.blank_form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.blank_form" class="source">
    <pre><code>def blank_form(self):
    self.form = MonitorUKUserAdminForm()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.data2form">
    <p>def <span class="ident">data2form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.data2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.data2form" class="source">
    <pre><code>def data2form(self):
    self.form = MonitorUKUserAdminForm(formdata=self.form_data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.finalise">
    <p>def <span class="ident">finalise</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.finalise', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.finalise" class="source">
    <pre><code>def finalise(self):
    super(MonitorUKUserAdminFormContext, self).finalise()
    self.target.save(blocking=True)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.form2target">
    <p>def <span class="ident">form2target</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.form2target', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.form2target" class="source">
    <pre><code>def form2target(self):
    self.target = MonitorUKUserAdminFormXwalk.form2obj(self.form, self.source)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.legal">
    <p>def <span class="ident">legal</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.legal', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.legal" class="source">
    <pre><code>def legal(self):
    # check the password and that the email is not already in use
    if not self._check_password():
        raise exceptions.IncorrectPasswordException("The password you provided was incorrect")
    if not self._check_email():
        raise exceptions.EmailInUseException("The email address you provided is in use by another user")
    return True
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.make_renderer">
    <p>def <span class="ident">make_renderer</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.make_renderer', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.make_renderer" class="source">
    <pre><code>def make_renderer(self):
    self.renderer = MonitorUKUserAdminFormRenderer()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.patch_target">
    <p>def <span class="ident">patch_target</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Patch the target with data from the source.  This will be run by the finalise method (unless you override it)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.patch_target', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.patch_target" class="source">
    <pre><code>def patch_target(self):
    """
    Patch the target with data from the source.  This will be run by the finalise method (unless you override it)
    """
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.pre_validate">
    <p>def <span class="ident">pre_validate</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.pre_validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.pre_validate" class="source">
    <pre><code>def pre_validate(self):
    # if this is a request to renew the API key, we don't do anything else with the form data
    if self.form.request_api_key.data == "true":
        password = self.form.password.data
        self.source2form()
        self.form.password.data = password
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.render_field_group">
    <p>def <span class="ident">render_field_group</span>(</p><p>self, field_group_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.render_field_group', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.render_field_group" class="source">
    <pre><code>def render_field_group(self, field_group_name=None):
    return self.renderer.render_field_group(self, field_group_name)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.render_template">
    <p>def <span class="ident">render_template</span>(</p><p>self, template=None, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.render_template', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.render_template" class="source">
    <pre><code>def render_template(self, template=None, **kwargs):
    return super(MonitorUKUserAdminFormContext, self).render_template(template=template, account=self.source, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.set_template">
    <p>def <span class="ident">set_template</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.set_template', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.set_template" class="source">
    <pre><code>def set_template(self):
    self.template = "account/user.html"
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.source2form">
    <p>def <span class="ident">source2form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.source2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.source2form" class="source">
    <pre><code>def source2form(self):
    data = MonitorUKUserAdminFormXwalk.obj2form(self.source)
    self.form = MonitorUKUserAdminForm(data=data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormContext.validate">
    <p>def <span class="ident">validate</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormContext.validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormContext.validate" class="source">
    <pre><code>def validate(self):
    self.pre_validate()
    f = self.form
    valid = False
    if f is not None:
        valid = f.validate()
    # if this isn't a valid form, record the fields that have errors
    # with the renderer for use later
    if not valid:
        error_fields = []
        for field in self.form:
            if field.errors:
                error_fields.append(field.short_name)
        if self.renderer is not None:
            self.renderer.set_error_fields(error_fields)
    return valid
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserAdminFormRenderer" class="name">class <span class="ident">MonitorUKUserAdminFormRenderer</span></p>
      
  
    <div class="desc"><p>Renderer definition for the user admin form.</p>
<p>Specifies the fields, the orders of those fields, and any additional rendering-related settings</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer" class="source">
    <pre><code>class MonitorUKUserAdminFormRenderer(Renderer):
    """
    Renderer definition for the user admin form.

    Specifies the fields, the orders of those fields, and any additional rendering-related settings
    """
    def __init__(self):
        super(MonitorUKUserAdminFormRenderer, self).__init__()

        self.FIELD_GROUPS = {
            "details" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "email" : {
                            "attributes" : {"placeholder" : "User's email address"}
                        }
                    },
                    {
                        "name" : {
                            "attributes" : {"placeholder" : "User's name"}
                        }
                    },
                    {
                        "organisation" : {
                            "attributes" : {"placeholder" : "The organisation the user works for"}
                        }
                    },
                    {
                        "org_role" : {
                            "attributes" : {"placeholder" : "User's role at their organisation"}
                        }
                    },
                    {
                        "lantern_email" : {
                            "attributes" : {"placeholder" : "Your user account email for Lantern"}
                        }
                    },
                    {
                        "lantern_api_key" : {
                            "attributes" : {"placeholder" : "Your account API key for Lantern"}
                        }
                    },
                    {
                        "user_roles" : {
                            "attributes" : {"placeholder" : "User's system roles (comma separated)"}
                        }
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Your admin password"}
                        }
                    }
                ]
            },
            "api_key" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "request_api_key" : {
                            "attributes" : {}
                        },
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Enter your password to make changes"}
                        }
                    }
                ]
            }
        }
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserAdminFormRenderer">MonitorUKUserAdminFormRenderer</a></li>
          <li>octopus.modules.form.context.Renderer</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormRenderer.FIELD_GROUPS" class="name">var <span class="ident">FIELD_GROUPS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormRenderer.disabled_fields" class="name">var <span class="ident">disabled_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserAdminFormRenderer.error_fields" class="name">var <span class="ident">error_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormRenderer.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer.__init__" class="source">
    <pre><code>def __init__(self):
    super(MonitorUKUserAdminFormRenderer, self).__init__()
    self.FIELD_GROUPS = {
        "details" : {
            "helper" : "bs3_horizontal",
            "wrappers" : ["first_error", "container"],
            "label_width" : 4,
            "control_width" : 8,
            "fields" : [
                {
                    "email" : {
                        "attributes" : {"placeholder" : "User's email address"}
                    }
                },
                {
                    "name" : {
                        "attributes" : {"placeholder" : "User's name"}
                    }
                },
                {
                    "organisation" : {
                        "attributes" : {"placeholder" : "The organisation the user works for"}
                    }
                },
                {
                    "org_role" : {
                        "attributes" : {"placeholder" : "User's role at their organisation"}
                    }
                },
                {
                    "lantern_email" : {
                        "attributes" : {"placeholder" : "Your user account email for Lantern"}
                    }
                },
                {
                    "lantern_api_key" : {
                        "attributes" : {"placeholder" : "Your account API key for Lantern"}
                    }
                },
                {
                    "user_roles" : {
                        "attributes" : {"placeholder" : "User's system roles (comma separated)"}
                    }
                },
                {
                    "password" : {
                        "attributes" : {"placeholder" : "Your admin password"}
                    }
                }
            ]
        },
        "api_key" : {
            "helper" : "bs3_horizontal",
            "wrappers" : ["first_error", "container"],
            "label_width" : 4,
            "control_width" : 8,
            "fields" : [
                {
                    "request_api_key" : {
                        "attributes" : {}
                    },
                },
                {
                    "password" : {
                        "attributes" : {"placeholder" : "Enter your password to make changes"}
                    }
                }
            ]
        }
    }
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormRenderer.find_field">
    <p>def <span class="ident">find_field</span>(</p><p>self, field, field_group)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer.find_field', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer.find_field" class="source">
    <pre><code>def find_field(self, field, field_group):
    for index, item in enumerate(self.FIELD_GROUPS[field_group]):
        if field in item:
            return index
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormRenderer.insert_field_after">
    <p>def <span class="ident">insert_field_after</span>(</p><p>self, field_to_insert, after_this_field, field_group)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer.insert_field_after', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer.insert_field_after" class="source">
    <pre><code>def insert_field_after(self, field_to_insert, after_this_field, field_group):
    self.FIELD_GROUPS[field_group].insert(
        self.find_field(after_this_field, field_group) + 1,
        field_to_insert
    )
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormRenderer.render_field_group">
    <p>def <span class="ident">render_field_group</span>(</p><p>self, form_context, field_group_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer.render_field_group', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer.render_field_group" class="source">
    <pre><code>def render_field_group(self, form_context, field_group_name=None):
    if field_group_name is None:
        return self._render_all(form_context)
    # get the group definition
    group_def = self.FIELD_GROUPS.get(field_group_name)
    if group_def is None:
        return ""
    # get the form helper
    fh = helper.FormHelperFactory.get(group_def.get("helper"), group_def.get("wrappers"))
    label_width = group_def.get("label_width")
    control_width = group_def.get("control_width")
    # build the frag
    frag = ""
    for entry in group_def.get("fields", []):
        field_name = entry.keys()[0]
        config = entry.get(field_name)
        if "label_width" not in config:
            config["label_width"] = label_width
        if "control_width" not in config:
            config["control_width"] = control_width
        # config = self._rewrite_extra_fields(form_context, config)
        field = form_context.form[field_name]
        if field_name in self.disabled_fields:
            config = deepcopy(config)
            if "attributes" not in config:
                config["attributes"] = {}
            config["attributes"]["disabled"] = "disabled"
        frag += fh.render_field(field, **config)
    return frag
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormRenderer.set_disabled_fields">
    <p>def <span class="ident">set_disabled_fields</span>(</p><p>self, fields)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer.set_disabled_fields', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer.set_disabled_fields" class="source">
    <pre><code>def set_disabled_fields(self, fields):
    self._disabled_fields = fields
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormRenderer.set_error_fields">
    <p>def <span class="ident">set_error_fields</span>(</p><p>self, fields)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormRenderer.set_error_fields', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormRenderer.set_error_fields" class="source">
    <pre><code>def set_error_fields(self, fields):
    self._error_fields = fields
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserAdminFormXwalk" class="name">class <span class="ident">MonitorUKUserAdminFormXwalk</span></p>
      
  
    <div class="desc"><p>Crosswalk for converting between the user form and the user account objects (in both directions)
within the context of an administrator interaction</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormXwalk', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormXwalk" class="source">
    <pre><code>class MonitorUKUserAdminFormXwalk(MonitorUKUserFormXwalk):
    """
    Crosswalk for converting between the user form and the user account objects (in both directions)
    within the context of an administrator interaction
    """

    @classmethod
    def obj2form(cls, acc):
        """
        Convert a user account object to a dictionary suitable for use with the admin form

        :param acc: user Account object
        :return: dictionary of form data
        """
        data = MonitorUKUserFormXwalk.obj2form(acc)
        data["user_roles"] = ", ".join(acc.role)
        return data

    @classmethod
    def form2obj(cls, form, acc=None):
        """
        Convert an admin form object to a user account object.  If a user account object is already supplied,
        enhance that object

        :param form:
        :param acc:
        :return:
        """
        acc = MonitorUKUserFormXwalk.form2obj(form, acc)

        if getattr(form, "user_roles", None):
            acc.role = [r.strip() for r in form.user_roles.data.split(",")]

        return acc
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserAdminFormXwalk">MonitorUKUserAdminFormXwalk</a></li>
          <li><a href="#service.forms.account.MonitorUKUserFormXwalk">MonitorUKUserFormXwalk</a></li>
          <li>octopus.modules.account.forms.BasicUserFormXwalk</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormXwalk.form2obj">
    <p>def <span class="ident">form2obj</span>(</p><p>cls, form, acc=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserFormXwalk">MonitorUKUserFormXwalk</a></code>.<code><a href="#service.forms.account.MonitorUKUserFormXwalk.form2obj">form2obj</a></code>
    </p>

    
  
    <div class="desc"><p>Convert an admin form object to a user account object.  If a user account object is already supplied,
enhance that object</p>
<p>:param form:
:param acc:
:return:</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormXwalk.form2obj', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormXwalk.form2obj" class="source">
    <pre><code>@classmethod
def form2obj(cls, form, acc=None):
    """
    Convert an admin form object to a user account object.  If a user account object is already supplied,
    enhance that object
    :param form:
    :param acc:
    :return:
    """
    acc = MonitorUKUserFormXwalk.form2obj(form, acc)
    if getattr(form, "user_roles", None):
        acc.role = [r.strip() for r in form.user_roles.data.split(",")]
    return acc
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserAdminFormXwalk.obj2form">
    <p>def <span class="ident">obj2form</span>(</p><p>cls, acc)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#service.forms.account.MonitorUKUserFormXwalk">MonitorUKUserFormXwalk</a></code>.<code><a href="#service.forms.account.MonitorUKUserFormXwalk.obj2form">obj2form</a></code>
    </p>

    
  
    <div class="desc"><p>Convert a user account object to a dictionary suitable for use with the admin form</p>
<p>:param acc: user Account object
:return: dictionary of form data</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserAdminFormXwalk.obj2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserAdminFormXwalk.obj2form" class="source">
    <pre><code>@classmethod
def obj2form(cls, acc):
    """
    Convert a user account object to a dictionary suitable for use with the admin form
    :param acc: user Account object
    :return: dictionary of form data
    """
    data = MonitorUKUserFormXwalk.obj2form(acc)
    data["user_roles"] = ", ".join(acc.role)
    return data
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserForm" class="name">class <span class="ident">MonitorUKUserForm</span></p>
      
  
    <div class="desc"><p>Defines the central user form for all users to complete</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserForm', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserForm" class="source">
    <pre><code>class MonitorUKUserForm(BasicUserForm):
    """
    Defines the central user form for all users to complete
    """
    name = StringField("Name", [validators.DataRequired()])

    organisation = StringField("Organisation", [validators.DataRequired()])

    org_role = StringField("Role at Organisation", [validators.DataRequired()])

    lantern_email = StringField("Lantern Email Address", [validators.Optional()], description="If you are using <a href='https://lantern.cottagelabs.com'>Lantern</a> for enhancing your records, enter the email you use to log in to Lantern here.")

    lantern_api_key = StringField("Lantern API Key", [validators.Optional()], description="If you are using <a href='https://lantern.cottagelabs.com'>Lantern</a> for enhancing your records, enter your Lantern API key here.")

    request_api_key = HiddenField("request_api_key", default="true")
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserForm">MonitorUKUserForm</a></li>
          <li>octopus.modules.account.forms.BasicUserForm</li>
          <li>wtforms.form.Form</li>
          <li>wtforms.compat.NewBase</li>
          <li>wtforms.form.BaseForm</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.confirm_new_password" class="name">var <span class="ident">confirm_new_password</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.email" class="name">var <span class="ident">email</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.lantern_api_key" class="name">var <span class="ident">lantern_api_key</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.lantern_email" class="name">var <span class="ident">lantern_email</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.new_password" class="name">var <span class="ident">new_password</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.org_role" class="name">var <span class="ident">org_role</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.organisation" class="name">var <span class="ident">organisation</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.password" class="name">var <span class="ident">password</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.request_api_key" class="name">var <span class="ident">request_api_key</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.data" class="name">var <span class="ident">data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserForm.errors" class="name">var <span class="ident">errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserForm.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, formdata=None, obj=None, prefix=&#39;&#39;, data=None, meta=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>:param formdata:
    Used to pass data coming from the enduser, usually <code>request.POST</code> or
    equivalent. formdata should be some sort of request-data wrapper which
    can get multiple parameters from the form input, and values are unicode
    strings, e.g. a Werkzeug/Django/WebOb MultiDict
:param obj:
    If <code>formdata</code> is empty or not provided, this object is checked for
    attributes matching form field names, which will be used for field
    values.
:param prefix:
    If provided, all fields will have their name prefixed with the
    value.
:param data:
    Accept a dictionary of data. This is only used if <code>formdata</code> and
    <code>obj</code> are not present.
:param meta:
    If provided, this is a dictionary of values to override attributes
    on this form's meta instance.
:param <code>**kwargs</code>:
    If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as a field, form will assign the value
    of a matching keyword argument to the field, if one exists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserForm.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserForm.__init__" class="source">
    <pre><code>def __init__(self, formdata=None, obj=None, prefix='', data=None, meta=None, **kwargs):
    """
    :param formdata:
        Used to pass data coming from the enduser, usually `request.POST` or
        equivalent. formdata should be some sort of request-data wrapper which
        can get multiple parameters from the form input, and values are unicode
        strings, e.g. a Werkzeug/Django/WebOb MultiDict
    :param obj:
        If `formdata` is empty or not provided, this object is checked for
        attributes matching form field names, which will be used for field
        values.
    :param prefix:
        If provided, all fields will have their name prefixed with the
        value.
    :param data:
        Accept a dictionary of data. This is only used if `formdata` and
        `obj` are not present.
    :param meta:
        If provided, this is a dictionary of values to override attributes
        on this form's meta instance.
    :param `**kwargs`:
        If `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as a field, form will assign the value
        of a matching keyword argument to the field, if one exists.
    """
    meta_obj = self._wtforms_meta()
    if meta is not None and isinstance(meta, dict):
        meta_obj.update_values(meta)
    super(Form, self).__init__(self._unbound_fields, meta=meta_obj, prefix=prefix)
    for name, field in iteritems(self._fields):
        # Set all the fields to attributes so that they obscure the class
        # attributes with the same names.
        setattr(self, name, field)
    self.process(formdata, obj, data=data, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserForm.populate_obj">
    <p>def <span class="ident">populate_obj</span>(</p><p>self, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Populates the attributes of the passed <code>obj</code> with data from the form's
fields.</p>
<p>:note: This is a destructive operation; Any attribute with the same name
       as a field will be overridden. Use with caution.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserForm.populate_obj', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserForm.populate_obj" class="source">
    <pre><code>def populate_obj(self, obj):
    """
    Populates the attributes of the passed `obj` with data from the form's
    fields.
    :note: This is a destructive operation; Any attribute with the same name
           as a field will be overridden. Use with caution.
    """
    for name, field in iteritems(self._fields):
        field.populate_obj(obj, name)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserForm.process">
    <p>def <span class="ident">process</span>(</p><p>self, formdata=None, obj=None, data=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Take form, object data, and keyword arg input and have the fields
process them.</p>
<p>:param formdata:
    Used to pass data coming from the enduser, usually <code>request.POST</code> or
    equivalent.
:param obj:
    If <code>formdata</code> is empty or not provided, this object is checked for
    attributes matching form field names, which will be used for field
    values.
:param data:
    If provided, must be a dictionary of data. This is only used if
    <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as the field.
:param <code>**kwargs</code>:
    If <code>formdata</code> is empty or not provided and <code>obj</code> does not contain
    an attribute named the same as a field, form will assign the value
    of a matching keyword argument to the field, if one exists.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserForm.process', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserForm.process" class="source">
    <pre><code>def process(self, formdata=None, obj=None, data=None, **kwargs):
    """
    Take form, object data, and keyword arg input and have the fields
    process them.
    :param formdata:
        Used to pass data coming from the enduser, usually `request.POST` or
        equivalent.
    :param obj:
        If `formdata` is empty or not provided, this object is checked for
        attributes matching form field names, which will be used for field
        values.
    :param data:
        If provided, must be a dictionary of data. This is only used if
        `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as the field.
    :param `**kwargs`:
        If `formdata` is empty or not provided and `obj` does not contain
        an attribute named the same as a field, form will assign the value
        of a matching keyword argument to the field, if one exists.
    """
    formdata = self.meta.wrap_formdata(self, formdata)
    if data is not None:
        # XXX we want to eventually process 'data' as a new entity.
        #     Temporarily, this can simply be merged with kwargs.
        kwargs = dict(data, **kwargs)
    for name, field, in iteritems(self._fields):
        if obj is not None and hasattr(obj, name):
            field.process(formdata, getattr(obj, name))
        elif name in kwargs:
            field.process(formdata, kwargs[name])
        else:
            field.process(formdata)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserForm.validate">
    <p>def <span class="ident">validate</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Validates the form by calling <code>validate</code> on each field, passing any
extra <code>Form.validate_&lt;fieldname&gt;</code> validators to the field validator.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserForm.validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserForm.validate" class="source">
    <pre><code>def validate(self):
    """
    Validates the form by calling `validate` on each field, passing any
    extra `Form.validate_<fieldname>` validators to the field validator.
    """
    extra = {}
    for name in self._fields:
        inline = getattr(self.__class__, 'validate_%s' % name, None)
        if inline is not None:
            extra[name] = [inline]
    return super(Form, self).validate(extra)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserFormContext" class="name">class <span class="ident">MonitorUKUserFormContext</span></p>
      
  
    <div class="desc"><p>Form context definition for the main user form</p>
<p>This defines the behaviours of the user account form from initial seeding from the account object, through
to rendering, and reading the data back to the updated account object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext" class="source">
    <pre><code>class MonitorUKUserFormContext(BasicUserFormContext):
    """
    Form context definition for the main user form

    This defines the behaviours of the user account form from initial seeding from the account object, through
    to rendering, and reading the data back to the updated account object.
    """
    def set_template(self):
        self.template = "account/user.html"

    def make_renderer(self):
        self.renderer = MonitorUKUserFormRenderer()

    def blank_form(self):
        self.form = MonitorUKUserForm()

    def data2form(self):
        self.form = MonitorUKUserForm(formdata=self.form_data)

    def source2form(self):
        data = MonitorUKUserFormXwalk.obj2form(self.source)
        self.form = MonitorUKUserForm(data=data)

    def form2target(self):
        self.target = MonitorUKUserFormXwalk.form2obj(self.form, self.source)

    def finalise(self):
        super(MonitorUKUserFormContext, self).finalise()
        self.target.save(blocking=True)

    def render_template(self, template=None, **kwargs):
        return super(MonitorUKUserFormContext, self).render_template(template=template, account=self.source, **kwargs)

    def pre_validate(self):
        # if this is a request to renew the API key, we don't do anything else with the form data
        if self.form.request_api_key.data == "true":
            password = self.form.password.data
            self.source2form()
            self.form.password.data = password
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserFormContext">MonitorUKUserFormContext</a></li>
          <li>octopus.modules.account.forms.BasicUserFormContext</li>
          <li>octopus.modules.form.context.FormContext</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.alert" class="name">var <span class="ident">alert</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.errors" class="name">var <span class="ident">errors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.form" class="name">var <span class="ident">form</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.form_data" class="name">var <span class="ident">form_data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.renderer" class="name">var <span class="ident">renderer</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.source" class="name">var <span class="ident">source</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.target" class="name">var <span class="ident">target</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormContext.template" class="name">var <span class="ident">template</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, form_data=None, source=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.__init__" class="source">
    <pre><code>def __init__(self, form_data=None, source=None):
    # initialise our core properties
    self._source = source
    self._target = None
    self._form_data = form_data
    self._form = None
    self._renderer = None
    self._template = None
    self._alert = []
    # initialise the renderer (falling back to a default if necessary)
    self.make_renderer()
    if self.renderer is None:
        self.renderer = Renderer()
    # specify the jinja template that will wrap the renderer
    self.set_template()
    # now create our form instance, with the form_data (if there is any)
    if form_data is not None:
        self.data2form()
    # if there isn't any form data, then we should create the form properties from source instead
    elif source is not None:
        self.source2form()
    # if there is no source, then a blank form object
    else:
        self.blank_form()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.add_alert">
    <p>def <span class="ident">add_alert</span>(</p><p>self, val)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.add_alert', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.add_alert" class="source">
    <pre><code>def add_alert(self, val):
    self._alert.append(val)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.blank_form">
    <p>def <span class="ident">blank_form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.blank_form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.blank_form" class="source">
    <pre><code>def blank_form(self):
    self.form = MonitorUKUserForm()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.data2form">
    <p>def <span class="ident">data2form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.data2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.data2form" class="source">
    <pre><code>def data2form(self):
    self.form = MonitorUKUserForm(formdata=self.form_data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.finalise">
    <p>def <span class="ident">finalise</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.finalise', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.finalise" class="source">
    <pre><code>def finalise(self):
    super(MonitorUKUserFormContext, self).finalise()
    self.target.save(blocking=True)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.form2target">
    <p>def <span class="ident">form2target</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.form2target', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.form2target" class="source">
    <pre><code>def form2target(self):
    self.target = MonitorUKUserFormXwalk.form2obj(self.form, self.source)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.legal">
    <p>def <span class="ident">legal</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.legal', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.legal" class="source">
    <pre><code>def legal(self):
    # check the password and that the email is not already in use
    if not self._check_password():
        raise exceptions.IncorrectPasswordException("The password you provided was incorrect")
    if not self._check_email():
        raise exceptions.EmailInUseException("The email address you provided is in use by another user")
    return True
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.make_renderer">
    <p>def <span class="ident">make_renderer</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.make_renderer', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.make_renderer" class="source">
    <pre><code>def make_renderer(self):
    self.renderer = MonitorUKUserFormRenderer()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.patch_target">
    <p>def <span class="ident">patch_target</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Patch the target with data from the source.  This will be run by the finalise method (unless you override it)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.patch_target', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.patch_target" class="source">
    <pre><code>def patch_target(self):
    """
    Patch the target with data from the source.  This will be run by the finalise method (unless you override it)
    """
    pass
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.pre_validate">
    <p>def <span class="ident">pre_validate</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.pre_validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.pre_validate" class="source">
    <pre><code>def pre_validate(self):
    # if this is a request to renew the API key, we don't do anything else with the form data
    if self.form.request_api_key.data == "true":
        password = self.form.password.data
        self.source2form()
        self.form.password.data = password
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.render_field_group">
    <p>def <span class="ident">render_field_group</span>(</p><p>self, field_group_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.render_field_group', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.render_field_group" class="source">
    <pre><code>def render_field_group(self, field_group_name=None):
    return self.renderer.render_field_group(self, field_group_name)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.render_template">
    <p>def <span class="ident">render_template</span>(</p><p>self, template=None, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.render_template', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.render_template" class="source">
    <pre><code>def render_template(self, template=None, **kwargs):
    return super(MonitorUKUserFormContext, self).render_template(template=template, account=self.source, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.set_template">
    <p>def <span class="ident">set_template</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.set_template', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.set_template" class="source">
    <pre><code>def set_template(self):
    self.template = "account/user.html"
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.source2form">
    <p>def <span class="ident">source2form</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.source2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.source2form" class="source">
    <pre><code>def source2form(self):
    data = MonitorUKUserFormXwalk.obj2form(self.source)
    self.form = MonitorUKUserForm(data=data)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormContext.validate">
    <p>def <span class="ident">validate</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormContext.validate', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormContext.validate" class="source">
    <pre><code>def validate(self):
    self.pre_validate()
    f = self.form
    valid = False
    if f is not None:
        valid = f.validate()
    # if this isn't a valid form, record the fields that have errors
    # with the renderer for use later
    if not valid:
        error_fields = []
        for field in self.form:
            if field.errors:
                error_fields.append(field.short_name)
        if self.renderer is not None:
            self.renderer.set_error_fields(error_fields)
    return valid
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserFormRenderer" class="name">class <span class="ident">MonitorUKUserFormRenderer</span></p>
      
  
    <div class="desc"><p>Renderer definition for the user form.</p>
<p>Specifies the fields, the orders of those fields, and any additional rendering-related settings</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer" class="source">
    <pre><code>class MonitorUKUserFormRenderer(Renderer):
    """
    Renderer definition for the user form.

    Specifies the fields, the orders of those fields, and any additional rendering-related settings
    """
    def __init__(self):
        super(MonitorUKUserFormRenderer, self).__init__()

        self.FIELD_GROUPS = {
            "details" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "email" : {
                            "attributes" : {"placeholder" : "Your email address"}
                        }
                    },
                    {
                        "name" : {
                            "attributes" : {"placeholder" : "Your name"}
                        }
                    },
                    {
                        "organisation" : {
                            "attributes" : {"placeholder" : "The organisation you work for"}
                        }
                    },
                    {
                        "org_role" : {
                            "attributes" : {"placeholder" : "Your role at your organisation"}
                        }
                    },
                    {
                        "lantern_email" : {
                            "attributes" : {"placeholder" : "Your user account email for Lantern"}
                        }
                    },
                    {
                        "lantern_api_key" : {
                            "attributes" : {"placeholder" : "Your account API key for Lantern"}
                        }
                    },
                    {
                        "new_password" : {
                            "attributes" : {"placeholder" : "Leave blank if not changing password"}
                        }
                    },
                    {
                        "confirm_new_password" : {
                            "attributes" : {"placeholder" : "Leave blank if not changing password"}
                        }
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Enter password to make changes"}
                        }
                    }
                ]
            },
            "api_key" : {
                "helper" : "bs3_horizontal",
                "wrappers" : ["first_error", "container"],
                "label_width" : 4,
                "control_width" : 8,
                "fields" : [
                    {
                        "request_api_key" : {
                            "attributes" : {}
                        },
                    },
                    {
                        "password" : {
                            "attributes" : {"placeholder" : "Enter your password to make changes"}
                        }
                    }
                ]
            }
        }
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserFormRenderer">MonitorUKUserFormRenderer</a></li>
          <li>octopus.modules.form.context.Renderer</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormRenderer.FIELD_GROUPS" class="name">var <span class="ident">FIELD_GROUPS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormRenderer.disabled_fields" class="name">var <span class="ident">disabled_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="service.forms.account.MonitorUKUserFormRenderer.error_fields" class="name">var <span class="ident">error_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormRenderer.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer.__init__', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer.__init__" class="source">
    <pre><code>def __init__(self):
    super(MonitorUKUserFormRenderer, self).__init__()
    self.FIELD_GROUPS = {
        "details" : {
            "helper" : "bs3_horizontal",
            "wrappers" : ["first_error", "container"],
            "label_width" : 4,
            "control_width" : 8,
            "fields" : [
                {
                    "email" : {
                        "attributes" : {"placeholder" : "Your email address"}
                    }
                },
                {
                    "name" : {
                        "attributes" : {"placeholder" : "Your name"}
                    }
                },
                {
                    "organisation" : {
                        "attributes" : {"placeholder" : "The organisation you work for"}
                    }
                },
                {
                    "org_role" : {
                        "attributes" : {"placeholder" : "Your role at your organisation"}
                    }
                },
                {
                    "lantern_email" : {
                        "attributes" : {"placeholder" : "Your user account email for Lantern"}
                    }
                },
                {
                    "lantern_api_key" : {
                        "attributes" : {"placeholder" : "Your account API key for Lantern"}
                    }
                },
                {
                    "new_password" : {
                        "attributes" : {"placeholder" : "Leave blank if not changing password"}
                    }
                },
                {
                    "confirm_new_password" : {
                        "attributes" : {"placeholder" : "Leave blank if not changing password"}
                    }
                },
                {
                    "password" : {
                        "attributes" : {"placeholder" : "Enter password to make changes"}
                    }
                }
            ]
        },
        "api_key" : {
            "helper" : "bs3_horizontal",
            "wrappers" : ["first_error", "container"],
            "label_width" : 4,
            "control_width" : 8,
            "fields" : [
                {
                    "request_api_key" : {
                        "attributes" : {}
                    },
                },
                {
                    "password" : {
                        "attributes" : {"placeholder" : "Enter your password to make changes"}
                    }
                }
            ]
        }
    }
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormRenderer.find_field">
    <p>def <span class="ident">find_field</span>(</p><p>self, field, field_group)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer.find_field', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer.find_field" class="source">
    <pre><code>def find_field(self, field, field_group):
    for index, item in enumerate(self.FIELD_GROUPS[field_group]):
        if field in item:
            return index
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormRenderer.insert_field_after">
    <p>def <span class="ident">insert_field_after</span>(</p><p>self, field_to_insert, after_this_field, field_group)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer.insert_field_after', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer.insert_field_after" class="source">
    <pre><code>def insert_field_after(self, field_to_insert, after_this_field, field_group):
    self.FIELD_GROUPS[field_group].insert(
        self.find_field(after_this_field, field_group) + 1,
        field_to_insert
    )
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormRenderer.render_field_group">
    <p>def <span class="ident">render_field_group</span>(</p><p>self, form_context, field_group_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer.render_field_group', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer.render_field_group" class="source">
    <pre><code>def render_field_group(self, form_context, field_group_name=None):
    if field_group_name is None:
        return self._render_all(form_context)
    # get the group definition
    group_def = self.FIELD_GROUPS.get(field_group_name)
    if group_def is None:
        return ""
    # get the form helper
    fh = helper.FormHelperFactory.get(group_def.get("helper"), group_def.get("wrappers"))
    label_width = group_def.get("label_width")
    control_width = group_def.get("control_width")
    # build the frag
    frag = ""
    for entry in group_def.get("fields", []):
        field_name = entry.keys()[0]
        config = entry.get(field_name)
        if "label_width" not in config:
            config["label_width"] = label_width
        if "control_width" not in config:
            config["control_width"] = control_width
        # config = self._rewrite_extra_fields(form_context, config)
        field = form_context.form[field_name]
        if field_name in self.disabled_fields:
            config = deepcopy(config)
            if "attributes" not in config:
                config["attributes"] = {}
            config["attributes"]["disabled"] = "disabled"
        frag += fh.render_field(field, **config)
    return frag
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormRenderer.set_disabled_fields">
    <p>def <span class="ident">set_disabled_fields</span>(</p><p>self, fields)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer.set_disabled_fields', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer.set_disabled_fields" class="source">
    <pre><code>def set_disabled_fields(self, fields):
    self._disabled_fields = fields
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormRenderer.set_error_fields">
    <p>def <span class="ident">set_error_fields</span>(</p><p>self, fields)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormRenderer.set_error_fields', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormRenderer.set_error_fields" class="source">
    <pre><code>def set_error_fields(self, fields):
    self._error_fields = fields
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="service.forms.account.MonitorUKUserFormXwalk" class="name">class <span class="ident">MonitorUKUserFormXwalk</span></p>
      
  
    <div class="desc"><p>Crosswalk for converting between the user form and the user account objects (in both directions)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormXwalk', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormXwalk" class="source">
    <pre><code>class MonitorUKUserFormXwalk(BasicUserFormXwalk):
    """
    Crosswalk for converting between the user form and the user account objects (in both directions)
    """

    @classmethod
    def obj2form(cls, acc):
        """
        Convert a user account object to a dictionary suitable for use with the form

        :param acc: user Account object
        :return: dictionary of form data
        """
        data = BasicUserFormXwalk.obj2form(acc)

        data["name"] = acc.name
        data["organisation"] = acc.organisation
        data["org_role"] = acc.org_role
        data["lantern_email"] = acc.lantern_email
        data["lantern_api_key"] = acc.lantern_api_key

        return data

    @classmethod
    def form2obj(cls, form, acc=None):
        """
        Convert a form object to a user account object.  If a user account object is already supplied,
        enhance that object

        :param form:
        :param acc:
        :return:
        """
        acc = BasicUserFormXwalk.form2obj(form, acc)

        if getattr(form, "name", None):
            acc.name = form.name.data
        if getattr(form, "organisation", None):
            acc.organisation = form.organisation.data
        if getattr(form, "org_role", None):
            acc.org_role = form.org_role.data
        if getattr(form, "lantern_email", None):
            acc.lantern_email = form.lantern_email.data
        if getattr(form, "lantern_api_key", None):
            acc.lantern_api_key = form.lantern_api_key.data

        # if a new API key has been requested, set it
        if form.request_api_key.data == "true":
            acc.generate_api_key()

        return acc
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#service.forms.account.MonitorUKUserFormXwalk">MonitorUKUserFormXwalk</a></li>
          <li>octopus.modules.account.forms.BasicUserFormXwalk</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormXwalk.form2obj">
    <p>def <span class="ident">form2obj</span>(</p><p>cls, form, acc=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Convert a form object to a user account object.  If a user account object is already supplied,
enhance that object</p>
<p>:param form:
:param acc:
:return:</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormXwalk.form2obj', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormXwalk.form2obj" class="source">
    <pre><code>@classmethod
def form2obj(cls, form, acc=None):
    """
    Convert a form object to a user account object.  If a user account object is already supplied,
    enhance that object
    :param form:
    :param acc:
    :return:
    """
    acc = BasicUserFormXwalk.form2obj(form, acc)
    if getattr(form, "name", None):
        acc.name = form.name.data
    if getattr(form, "organisation", None):
        acc.organisation = form.organisation.data
    if getattr(form, "org_role", None):
        acc.org_role = form.org_role.data
    if getattr(form, "lantern_email", None):
        acc.lantern_email = form.lantern_email.data
    if getattr(form, "lantern_api_key", None):
        acc.lantern_api_key = form.lantern_api_key.data
    # if a new API key has been requested, set it
    if form.request_api_key.data == "true":
        acc.generate_api_key()
    return acc
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="service.forms.account.MonitorUKUserFormXwalk.obj2form">
    <p>def <span class="ident">obj2form</span>(</p><p>cls, acc)</p>
    </div>
    

    
  
    <div class="desc"><p>Convert a user account object to a dictionary suitable for use with the form</p>
<p>:param acc: user Account object
:return: dictionary of form data</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-service.forms.account.MonitorUKUserFormXwalk.obj2form', this);">Show source &equiv;</a></p>
  <div id="source-service.forms.account.MonitorUKUserFormXwalk.obj2form" class="source">
    <pre><code>@classmethod
def obj2form(cls, acc):
    """
    Convert a user account object to a dictionary suitable for use with the form
    :param acc: user Account object
    :return: dictionary of form data
    """
    data = BasicUserFormXwalk.obj2form(acc)
    data["name"] = acc.name
    data["organisation"] = acc.organisation
    data["org_role"] = acc.org_role
    data["lantern_email"] = acc.lantern_email
    data["lantern_api_key"] = acc.lantern_api_key
    return data
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
